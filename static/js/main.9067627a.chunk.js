(this["webpackJsonpbreaking-bad"]=this["webpackJsonpbreaking-bad"]||[]).push([[0],{39:function(e,n,t){},40:function(e,n,t){},59:function(e,n,t){},60:function(e,n,t){},61:function(e,n,t){},62:function(e,n,t){},63:function(e,n,t){"use strict";t.r(n);var c=t(1),a=t(0),s=t.n(a),r=t(8),i=t.n(r),o=t(4),d=(t(39),t(15)),l=(t(40),t(7)),u=t.n(l),j=t(27),v=t(14),b=t(25),O=t.n(b).a.create({baseURL:"https://www.breakingbadapi.com/api/",timeout:5e3}),h="GET_SEASONS_SUCCESS",m="GET_SEASONS_START",f="GET_CHARACTER_IMG_START",p="GET_CHARACTER_IMG_SUCCESS";function _(e,n){return function(){var t=Object(v.a)(u.a.mark((function t(c,a){var s,r,i,o,d,l,v,b,f,p,_,x,g,E,N,S,w,k;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n&&c({type:m}),t.prev=1,t.next=4,O.get("/episodes/".concat(e));case 4:r=t.sent,i=r.data,"Season_".concat(null===(s=i[0])||void 0===s?void 0:s.season),o=Object(j.a)(a().seasons.seasons),e<63?o.find((function(e){var n;return e.season.trim()===(null===(n=i[0])||void 0===n?void 0:n.season.trim())}))?(_=o.findIndex((function(e){return e.season.trim()===i[0].season.trim()})),o[_].list.push({characters:null===(b=i[0])||void 0===b?void 0:b.characters,title:null===(f=i[0])||void 0===f?void 0:f.title,episode:null===(p=i[0])||void 0===p?void 0:p.episode})):o.push({season:i[0].season,list:[{characters:null===(d=i[0])||void 0===d?void 0:d.characters,title:null===(l=i[0])||void 0===l?void 0:l.title,episode:null===(v=i[0])||void 0===v?void 0:v.episode}]}):o.find((function(e){var n;return e.season===+(null===(n=i[0])||void 0===n?void 0:n.season.trim())+5}))?(k=o.findIndex((function(e){return e.season===+i[0].season.trim()+5})),o[k].list.push({characters:null===(N=i[0])||void 0===N?void 0:N.characters,title:null===(S=i[0])||void 0===S?void 0:S.title,episode:null===(w=i[0])||void 0===w?void 0:w.episode})):o.push({season:+i[0].season+5,list:[{characters:null===(x=i[0])||void 0===x?void 0:x.characters,title:null===(g=i[0])||void 0===g?void 0:g.title,episode:null===(E=i[0])||void 0===E?void 0:E.episode}]}),o.forEach((function(e){return e.list.sort((function(e,n){return e.episode-n.episode}))})),c({type:h,seasons:o}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),console.log(t.t0);case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e,n){return t.apply(this,arguments)}}()}function x(e){return function(){var n=Object(v.a)(u.a.mark((function n(t){var c;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t({type:f}),n.prev=1,n.next=4,O.get("/characters?name=".concat(e));case 4:c=n.sent,t((a=c.data[0].img,{type:p,src:a})),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(1),console.log(n.t0);case 11:case"end":return n.stop()}var a}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}()}t(59);var g=function(e){var n=e.index,t=e.title,a=e.children;return Object(c.jsxs)("div",{className:"card",children:[Object(c.jsxs)("div",{className:"card__title__wrapper",children:[Object(c.jsx)("div",{className:"card__title",children:n}),Object(c.jsx)("div",{className:"card__name",children:t})]}),Object(c.jsx)("div",{className:"card__content",children:a})]})},E=(t(60),function(){return Object(c.jsx)("header",{className:"header",children:Object(c.jsx)("div",{className:"main-wrapper",children:Object(c.jsx)("h1",{className:"header__title",children:"Breaking bad"})})})}),N=(t(61),t(62),function(e){var n=e.black;return Object(c.jsxs)("div",{className:"lds-roller".concat(n?" lds-roller--black":""),children:[Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{}),Object(c.jsx)("div",{})]})}),S=function(e){var n,t=e.isModal,s=e.src,r=e.onClose,i=Object(o.c)((function(e){return e.seasons.loading})),d=Object(a.useRef)(null);return n=d,Object(a.useEffect)((function(){function e(e){n.current&&!n.current.contains(e.target)&&(e.preventDefault(),r())}return document.addEventListener("mouseup",e),function(){document.removeEventListener("mouseup",e)}}),[n]),Object(c.jsx)(c.Fragment,{children:t?i?Object(c.jsx)("div",{className:"modal",children:Object(c.jsx)("div",{className:"modal__loading",ref:d,children:Object(c.jsx)(N,{})})}):Object(c.jsx)("div",{className:"modal",children:Object(c.jsx)("div",{className:"modal__inner",ref:d,children:Object(c.jsx)("img",{src:s,alt:"",className:"modal__img"})})}):null})},w=function(){var e=Object(o.b)(),n=Object(o.c)((function(e){return e.seasons.seasons})),t=Object(o.c)((function(e){return e.seasons.characterImgSrc})),r=Object(o.c)((function(e){return e.seasons.seasonsLoading})),i=Object(a.useState)(1),l=Object(d.a)(i,2),u=l[0],j=l[1],v=Object(a.useState)(!1),b=Object(d.a)(v,2),O=b[0],h=b[1],m=[7,13,13,13,16,10,10,10,10];Object(a.useEffect)((function(){return window.addEventListener("scroll",p),function(){window.removeEventListener("scroll",p)}}),[]),Object(a.useEffect)((function(){var n=0;m.forEach((function(e,t){u-1===t||u-1<t||(n+=e)}));for(var t=n;t<m[u-1]+n;t++)e(_(t+1))}),[u]);var f=function(n){h(!0),n.split("").find((function(e){return"-"===e}))?e(x(n.split("-").join("+"))):e(x(n.split(" ").join("+")))},p=function(){window.innerHeight+document.documentElement.scrollTop===document.documentElement.offsetHeight&&j((function(e){if(e+1<=m.length)return e+1}))};return Object(c.jsxs)("div",{className:"App",children:[Object(c.jsx)(E,{}),Object(c.jsx)("main",{className:"main",children:Object(c.jsx)("div",{className:"main-wrapper",children:r?Object(c.jsx)("div",{className:"cards__loading",children:Object(c.jsx)(N,{black:!0})}):n.length>0&&n.map((function(e){return Object(c.jsxs)(s.a.Fragment,{children:[Object(c.jsxs)("div",{className:"cards__season",children:["\u0421\u0435\u0437\u043e\u043d ",e.season]}),Object(c.jsx)("div",{className:"cards",children:e.list.map((function(e,n){return Object(c.jsx)(g,{index:n+1,title:e.title,children:e.characters.map((function(n,t){return t+1!==e.characters.length?Object(c.jsxs)("div",{onClick:function(){return f(n)},className:"card__character",children:[n,","]},"".concat(Math.random(),"--main-card-character")):Object(c.jsx)("div",{onClick:function(){return f(n)},className:"card__character",children:n},"".concat(Math.random(),"--main-card-character"))}))},"".concat(Math.random(),"--main-card"))}))})]},"".concat(Math.random(),"--main-cards"))}))})}),Object(c.jsx)(S,{isModal:O,src:t,onClose:function(){return h(!1)}})]})},k=t(5),T=t(26),C=t(3),L={seasons:[],seasonsLoading:!1,characterImgSrc:"",loading:!1},M=Object(k.c)({seasons:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case m:return Object(C.a)(Object(C.a)({},e),{},{seasonsLoading:!0});case h:return Object(C.a)(Object(C.a)({},e),{},{seasons:n.seasons,seasonsLoading:!1});case f:return Object(C.a)(Object(C.a)({},e),{},{loading:!0});case p:return Object(C.a)(Object(C.a)({},e),{},{characterImgSrc:n.src,loading:!1});default:return Object(C.a)({},e)}}}),I="object"===typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({}):k.d,R=Object(k.e)(M,I(Object(k.a)(T.a)));i.a.render(Object(c.jsx)(s.a.StrictMode,{children:Object(c.jsx)(o.a,{store:R,children:Object(c.jsx)(w,{})})}),document.getElementById("root"))}},[[63,1,2]]]);
//# sourceMappingURL=main.9067627a.chunk.js.map